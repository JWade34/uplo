<!DOCTYPE html>
<html>
<head>
  <title>Fix Justin's Account - Uplo Admin</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
</head>

<body class="bg-gray-100">
  <div class="min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full space-y-8">
      <div>
        <div class="flex justify-center">
          <%= render 'shared/admin_logo' %>
        </div>
        <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
          Account Fixed!
        </h2>
      </div>
      
      <div class="bg-white shadow rounded-lg p-6">
        <div class="text-center">
          <div class="text-lg font-medium text-gray-900 mb-4">
            <%= @message %>
          </div>
          
          <% if @details %>
            <div class="text-sm text-gray-600 mb-4">
              <%= @details %>
            </div>
          <% end %>
          
          <% if @error_details %>
            <div class="bg-red-50 border border-red-200 rounded-md p-4 mb-4">
              <h3 class="font-medium text-red-800">Error Details:</h3>
              <pre class="mt-2 text-xs text-red-700 whitespace-pre-wrap"><%= @error_details %></pre>
            </div>
          <% end %>
          
          <% if @user %>
            <div class="bg-green-50 border border-green-200 rounded-md p-4 mb-4">
              <h3 class="font-medium text-green-800">Account Status:</h3>
              <ul class="mt-2 text-sm text-green-700 text-left">
                <li>• Email: <%= @user.email_address %></li>
                <li>• Monthly photos: <%= @user.current_month_photos %></li>
                <li>• Photo limit: <%= @user.effective_monthly_photo_limit == Float::INFINITY ? 'Unlimited' : @user.effective_monthly_photo_limit %></li>
                <li>• Can upload: <%= @user.can_upload_photo? ? 'Yes' : 'No' %></li>
                <li>• Subscription tier: <%= @user.subscription_tier %></li>
                <li>• Subscription status: <%= @user.subscription_status %></li>
                <li>• Can access pro: <%= @user.can_access_pro_features? ? 'Yes' : 'No' %></li>
              </ul>
            </div>
          <% end %>
          
          <div class="space-y-3">
            <%= link_to "Go to App", root_path, 
                        class: "w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700" %>
            <%= link_to "Admin Logout", admin_logout_path, 
                        class: "w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>