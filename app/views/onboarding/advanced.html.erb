<!-- Advanced Onboarding Setup -->
<div class="min-h-screen bg-gradient-to-br from-gray-900 to-black">
  <!-- Navigation -->
  <nav class="bg-transparent py-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center">
        <%= render 'shared/logo', size: '1.75rem' %>
        <div class="text-gray-400 text-sm">
          Optional Step 3 of 3
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header with Benefits -->
    <div class="text-center mb-8">
      <div class="w-16 h-16 bg-gradient-to-r from-accent to-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4">
        <span class="text-2xl">🎯</span>
      </div>
      <h1 class="text-3xl font-bold text-white mb-4">
        Get <span class="text-accent">Ultra-Personalized</span> Captions
      </h1>
      <p class="text-gray-300 mb-6">
        The more we know about your brand, the better your AI captions will be.
      </p>
      
      <!-- Benefits Comparison -->
      <div class="grid md:grid-cols-2 gap-6 mb-8">
        <div class="bg-red-900/20 border border-red-500/30 rounded-lg p-4">
          <h3 class="text-red-300 font-semibold mb-2">❌ Basic Setup</h3>
          <p class="text-red-200 text-sm">"Great workout today! 💪 #fitness #motivation"</p>
        </div>
        <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-4">
          <h3 class="text-green-300 font-semibold mb-2">✅ Advanced Setup</h3>
          <p class="text-green-200 text-sm">"Busy moms: this 20-min strength circuit builds confidence AND burns fat. DM me for your free starter plan! 💪✨"</p>
        </div>
      </div>
    </div>

    <!-- Skip or Continue Options -->
    <div class="bg-white rounded-xl p-8 shadow-2xl mb-6">
      <div class="text-center mb-6">
        <h2 class="text-xl font-bold text-gray-900 mb-2">Choose Your Setup Level</h2>
        <p class="text-gray-600">You can always add this information later in your profile settings</p>
      </div>
      
      <div class="grid md:grid-cols-2 gap-4 mb-6">
        <button onclick="document.getElementById('skip-section').classList.remove('hidden'); this.parentElement.classList.add('hidden')" 
                class="p-4 border-2 border-gray-300 rounded-lg hover:border-gray-400 transition-colors text-left">
          <h3 class="font-semibold text-gray-900">⚡ Quick Start</h3>
          <p class="text-sm text-gray-600 mt-1">Start with basic captions and improve them later</p>
        </button>
        
        <button onclick="document.getElementById('advanced-form').classList.remove('hidden'); this.parentElement.classList.add('hidden')" 
                class="p-4 border-2 border-accent bg-accent/5 rounded-lg hover:bg-accent/10 transition-colors text-left">
          <h3 class="font-semibold text-gray-900">🚀 Pro Setup (Recommended)</h3>
          <p class="text-sm text-gray-600 mt-1">Get ultra-personalized captions that drive real results</p>
        </button>
      </div>
    </div>

    <!-- Skip Section -->
    <div id="skip-section" class="hidden bg-white rounded-xl p-8 shadow-2xl text-center">
      <h3 class="text-xl font-semibold text-gray-900 mb-4">Ready to Start Creating?</h3>
      <p class="text-gray-600 mb-6">You can always add more details later to improve your captions.</p>
      <%= link_to onboarding_complete_path, 
          class: "inline-block bg-accent text-black px-8 py-3 rounded-lg font-semibold hover:bg-accent-hover transition-colors" do %>
        Continue to Dashboard 🚀
      <% end %>
    </div>

    <!-- Advanced Form -->
    <div id="advanced-form" class="hidden bg-white rounded-xl p-8 shadow-2xl">
      <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">
        🎯 Let's Create Your Brand Profile
      </h2>
      
      <%= form_with model: @user, url: onboarding_advanced_path, method: :patch, local: true, class: "space-y-8" do |form| %>
        
        <!-- Error Messages -->
        <% if @user.errors.any? %>
          <div class="bg-red-50 border border-red-200 rounded-lg p-4">
            <div class="flex">
              <div class="flex-shrink-0">
                <span class="text-red-400">�</span>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-medium text-red-800">Please fix the following errors:</h3>
                <div class="mt-2 text-sm text-red-700">
                  <ul class="list-disc space-y-1 pl-5">
                    <% @user.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        <% end %>

        <!-- Section 1: Client & Business Focus -->
        <div class="border-l-4 border-accent pl-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">🎯 Your Clients & Business</h3>
          
          <div class="space-y-4">
            <div>
              <%= form.label :client_pain_points, "What are your clients' biggest struggles or pain points?", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= form.text_area :client_pain_points, 
                  placeholder: "e.g., Busy moms struggling with energy, professionals with no time to exercise, beginners intimidated by the gym...", 
                  rows: 3,
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors resize-none" %>
            </div>
            
            <div>
              <%= form.label :unique_approach, "What makes your approach unique? How do you solve these problems differently?", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= form.text_area :unique_approach, 
                  placeholder: "e.g., I focus on 20-minute workouts that fit into busy schedules, emphasize functional movements for real-life strength...", 
                  rows: 3,
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors resize-none" %>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <%= form.label :location, "Location/Service Area", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :location, 
                    placeholder: "e.g., Austin, TX or Online Worldwide", 
                    class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors" %>
              </div>
              
              <div>
                <%= form.label :price_range, "Service Price Range", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.select :price_range, 
                    options_for_select([
                      ["Under $50/session", "budget"],
                      ["$50-100/session", "mid_range"],
                      ["$100-200/session", "premium"],
                      ["$200+/session", "luxury"],
                      ["Programs/Packages", "packages"]
                    ], @user.price_range), 
                    { prompt: "Select price range" },
                    { class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors" } %>
              </div>
            </div>
          </div>
        </div>

        <!-- Section 2: Brand Voice & Personality -->
        <div class="border-l-4 border-blue-500 pl-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">🗣️ Your Brand Voice</h3>
          
          <div class="space-y-4">
            <div>
              <%= form.label :brand_personality, "Describe your personality in 3-5 words", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= form.text_field :brand_personality, 
                  placeholder: "e.g., Energetic, supportive, no-nonsense, fun", 
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors" %>
            </div>
            
            <div>
              <%= form.label :sample_caption, "Share a caption you wrote that got great engagement (or one you love)", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= form.text_area :sample_caption, 
                  placeholder: "Paste a caption that represents your voice and style...", 
                  rows: 4,
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors resize-none" %>
            </div>
            
            <div>
              <%= form.label :words_to_avoid, "Any words or phrases you prefer NOT to use?", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= form.text_area :words_to_avoid, 
                  placeholder: "e.g., 'grind', 'beast mode', overly aggressive language...", 
                  rows: 2,
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors resize-none" %>
            </div>
          </div>
        </div>

        <!-- Section 3: Content Strategy -->
        <div class="border-l-4 border-green-500 pl-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">📈 Content Strategy</h3>
          
          <div class="space-y-4">
            <div>
              <%= form.label :call_to_action_preference, "What action do you want followers to take?", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= form.select :call_to_action_preference, 
                  options_for_select([
                    ["DM me for more info", "dm"],
                    ["Book a consultation", "book"],
                    ["Check out my programs", "programs"],
                    ["Follow for more tips", "follow"],
                    ["Like and share", "engage"],
                    ["Visit my website", "website"]
                  ], @user.call_to_action_preference), 
                  { prompt: "Select primary CTA" },
                  { class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors" } %>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <%= form.label :posting_frequency, "How often do you post?", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.select :posting_frequency, 
                    options_for_select([
                      ["Daily", "daily"],
                      ["Few times a week", "few_times_week"],
                      ["Weekly", "weekly"],
                      ["As needed", "as_needed"]
                    ], @user.posting_frequency), 
                    { prompt: "Select frequency" },
                    { class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors" } %>
              </div>
              
              <div>
                <%= form.label :favorite_hashtags, "Favorite hashtags (comma separated)", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :favorite_hashtags, 
                    placeholder: "#strengthtraining, #womenshealth, #austinfitness", 
                    class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-colors" %>
              </div>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="pt-6 text-center">
          <%= form.submit "Complete Pro Setup & Start Creating 🚀", 
              class: "w-full bg-accent text-black py-4 rounded-lg font-semibold text-lg hover:bg-accent-hover transition-colors" %>
          
          <p class="text-sm text-gray-500 mt-3">
            This detailed profile will create captions that sound exactly like you and convert followers into clients.
          </p>
        </div>

      <% end %>
    </div>
  </div>
</div>

<script>
// Add some smooth scrolling when forms appear
document.addEventListener('DOMContentLoaded', function() {
  const buttons = document.querySelectorAll('button[onclick]');
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      setTimeout(() => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 100);
    });
  });
});
</script>